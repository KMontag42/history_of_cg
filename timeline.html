<!DOCTYPE html>
<html>
    <head>
        <title>Timeline</title>
        <script src="js/raphael-min.js"></script>
    </head>

    <body>

        <script>
        // Raphael timeline
            var timelineX = 100; 
            var timelineY = 100;
            var timelineWidth = 800;
            var zoomLevel = 0;
            
            var entryNum = 50;
            var entries = new Array();
            
            var canvas;
            var context;
            
            window.onload = function() {
                // Get the canvas context
                canvas = document.getElementById("timeline");
                context = canvas.getContext("2d");
                
                drawLine();
                
                // Initialize the drawing information for every entry
                for(var i=0; i<entryNum; i++) {
                    entries[i] = {
                        x: i * 10 + timelineX, 
                        y: timelineY, 
                        offset: i * 10 + timelineX, 
                        radius: 5, 
                        color: "#000000"
                    };
                }
                
                drawEntries();
                    
            }
            
            // Clears the canvas and redraws the timeline
            function clearCanvas() {
                context.clearRect(0, 0, canvas.width, canvas.height);
                drawLine();
            }
            
            // Draws the timeline
            function drawLine() {
                context.moveTo(timelineX, timelineY);
                context.lineTo(timelineX + timelineWidth, timelineY);
                context.stroke();
            }   
            
            // Draws every entry based on pre-determined position, radius and color
            function drawEntries() {
                for(var i=0; i<entryNum; i++) {                    
                    context.beginPath();
                    context.arc(entries[i].x, entries[i].y, entries[i].radius, 0, 2 * Math.PI, false);
                    context.fillStyle = entries[i].color;
                    context.fill();
                    context.stroke();
                }
            }
            
            // Moves every entry left
            function moveLeft() {
                clearCanvas();
                
                for(var i=0; i<entryNum; i++) {
                    entries[i].x -= 50;
                }
                
                drawEntries();
            }
            
            // Moves every entry right
            function moveRight() {
                clearCanvas();
                
                for(var i=0; i<entryNum; i++) {
                    entries[i].x += 50;
                }
                
                drawEntries();
            }
            
            // Zooms in on the entries
            function zoomIn() {
                if(zoomLevel  == 100) 
                    return;
                clearCanvas();
                
                for(var i=0; i<entryNum; i++) {
                    if(entries[i].x < timelineWidth/2) {
                        entries[i].x -= ((timelineWidth/2) - (entries[i].offset * .8)); 
                    }
                    else {
                        entries[i].x += ((entries[i].offset *.8) - (timelineWidth/2));
                    }
                }
                
                drawEntries();
                zoomLevel += 25;
            }
            
            // Zooms out on the entries
            function zoomOut() {
                if(zoomLevel == 0)
                    return;
                clearCanvas();
                
                for(var i=0; i<entryNum; i++) {
                    if(entries[i].x < timelineWidth/2) {
                        entries[i].x += ((timelineWidth/2) - (entries[i].offset * .8));
                    }
                    else {
                        entries[i].x -= ((entries[i].offset * .8) - (timelineWidth/2));
                    }
                }
                
                drawEntries();
                zoomLevel -= 25;
            }
            
            
        </script>
        
        
        <canvas id="timeline" width="1000" height="200"></canvas>
        <button type="button" id="moveLeft" onclick="moveLeft()"> &#60 </button>
        <button type="button" id="moreRight" onclick="moveRight()"> &#62 </button>
        <br />
        <button type="button" id="zoomIn" onclick="zoomIn()"> &#43 </button>
        <button type="button" id="zoomOut" onclick="zoomOut()"> &#45 </button>


    </body>
</html>

